<?php
/**
 * Created by PhpStorm.
 * User: yara
 * Date: 2017/5/22
 * Time: 14:08
 */

namespace Admini\Model;

use Think\Model;

class FacilitiestypeModel extends Model
{
    /**
     * 故障信息
     * */
    public $error = array(
        1 => array(
           1=>'错相',
           2=>'缺相',
           3=>'水流开关',
           4=>'',
           5=>'高压开关1',
           6=>'低压开关1',
           7=>'高压开关2',
           8=>'低压开关2',
           9=>'通讯',
           10=>'扩展板通讯',
           11=>'限时',
           12=>'排气1温度高',
           13=>'排气2温度高',
           14=>'',
           15=>'水箱温传',
           16=>'盘管1温传',
           17=>'盘管2温传',
           18=>'排气1温传',
           19=>'排气2温传',
           20=>'',
           21=>'外环温传',
           22=>'回水温传',
           23=>'进水温传',
           24=>'',
           25=>'水位开关',
           26=>'进水温度过高',
           27=>'出水温传1',
           28=>'出水温传2',
           29=>'回气温传1',
           30=>'回气温传2',
           31=>'水压开关',
           32=>'出水温度低',
           33=>'水源水温度低',
           34=>'出水温度高',
           35=>'压缩机1过流',
           36=>'压缩机2过流',
           37=>'恒温器1无水流',
           38=>'恒温器2无水流',
           39=>'冷却水温度高',
           40=>'水源水温差大',
           41=>'循环水温差大'
       ),
        2 => array(
           1=>'错相',
           2=>'缺相',
           3=>'水流开关',
           4=>'',
           5=>'高压开关',
           6=>'低压开关',
           7=>'',
           8=>'',
           9=>'通讯',
           10=>'扩展板通讯',
           11=>'限时',
           12=>'排气温度高',
           13=>'',
           14=>'',
           15=>'水箱温传',
           16=>'盘管温传',
           17=>'',
           18=>'排气温传',
           19=>'',
           20=>'',
           21=>'外环温传',
           22=>'回水温传',
           23=>'',
           24=>'',
           25=>'水位开关',
           26=>'',
           27=>'出水温传',
           28=>'',
           29=>'回气温传',
           30=>'',
           31=>'水压开关',
           32=>'出水温度低',
           33=>'水源水温度低',
           34=>'出水温度高',
           35=>'压缩机1过流',
           36=>'',
           37=>'恒温器1无水流',
           38=>'',
           39=>'冷却水温度高',
           40=>'水源水温差大',
           41=>'循环水温差大'
       ),
        3 => array(
           1=>'',
           2=>'',
           3=>'',
           4=>'',
           5=>'高压开关',
           6=>'低压开关',
           7=>'',
           8=>'',
           9=>'通讯',
           10=>'',
           11=>'限时',
           12=>'排气温度高',
           13=>'',
           14=>'',
           15=>'室内温传',
           16=>'盘管温传',
           17=>'',
           18=>'排气温传',
           19=>'',
           20=>'',
           21=>'',
           22=>'',
           23=>'',
           24=>'',
           25=>'',
           26=>'',
           27=>'',
           28=>'',
           29=>'',
           30=>'',
           31=>'',
           32=>'出水温度低',
           33=>'水源水温度低',
           34=>'出水温度高',
           35=>'',
           36=>'',
           37=>'',
           38=>'',
           39=>'',
           40=>'水源水温差大',
           41=>'循环水温差大',
       ),
        4 => array(
           1=>'错相',
           2=>'缺相',
           3=>'水流开关',
           4=>'',
           5=>'高压开关',
           6=>'低压开关',
           7=>'',
           8=>'',
           9=>'通讯',
           10=>'',
           11=>'限时',
           12=>'排气温度高',
           13=>'',
           14=>'',
           15=>'水箱温传',
           16=>'盘管温传',
           17=>'',
           18=>'排气温传',
           19=>'',
           20=>'',
           21=>'',
           22=>'',
           23=>'',
           24=>'',
           25=>'',
           26=>'',
           27=>'',
           28=>'',
           29=>'',
           30=>'',
           31=>'',
           32=>'出水温度低',
           33=>'水源水温度低',
           34=>'出水温度高',
           35=>'',
           36=>'',
           37=>'',
           38=>'',
           39=>'',
           40=>'水源水温差大',
           41=>'循环水温差大',
       ),
        5 => array(
           1=>'错相',
           2=>'缺相',
           3=>'水流开关1',
           4=>'水流开关2',
           5=>'高压开关1',
           6=>'低压开关1',
           7=>'高压开关2',
           8=>'低压开关2',
           9=>'通讯',
           10=>'扩展板通讯',
           11=>'限时',
           12=>'排气1温度高',
           13=>'排气2温度高',
           14=>'',
           15=>'水箱温传',
           16=>'盘管1温传',
           17=>'盘管2温传',
           18=>'排气1温传',
           19=>'排气2温传',
           20=>'',
           21=>'外环温传',
           22=>'回水温传',
           23=>'进水温传',
           24=>'',
           25=>'水位开关',
           26=>'进水温度过高',
           27=>'出水温传1',
           28=>'出水温传2',
           29=>'回气温传1',
           30=>'回气温传2',
           31=>'水压开关',
           32=>'出水温度低',
           33=>'水源水温度低',
           34=>'出水温度高',
           35=>'压缩机1过流',
           36=>'压缩机2过流',
           37=>'恒温器1无水流',
           38=>'恒温器2无水流',
           39=>'冷却水温度高',
           40=>'水源水温差大',
           41=>'循环水温差大',
           63=>'水流开关2',
           64=>'',
           65=>'高压开关3',
           66=>'低压开关3',
           67=>'高压开关4',
           68=>'低压开关4',
           69=>'',
           70=>'',
           71=>'',
           72=>'排气3温度高',
           73=>'排气4温度高',
           74=>'',
           75=>'',
           76=>'盘管3温传',
           77=>'盘管4温传',
           78=>'排气3温传',
           79=>'排气4温传',
           80=>'',
           81=>'',
           82=>'',
           83=>'',
           84=>'',
           85=>'',
           86=>'',
           87=>'',
           88=>'',
           89=>'回气温传3',
           90=>'回气温传4',
           91=>'',
           92=>'',
           93=>'',
           94=>'',
           95=>'',
           96=>'压缩机3过流',
           97=>'压缩机4过流',
           98=>'',
           99=>''
       )
    );

    /**
     * 发送命令数组
     * */
    public $send_data = array(
        'data1' => -9999,
        'data2' => -9999,
        'data3' => -9999,
        'data4' => -9999,
        'data5' => -9999,
        'data6' => -9999,
        'data7' => -9999,
        'data8' => -9999,
        'data9' => -9999,
        'data10' => -9999,
        'data11_7' => -9999,
        'data11_6' => -9999,
        'data11_5' => -9999,
        'data11_4' => -9999,
        'data11_3' => -9999,
        'data11_2' => -9999,
        'data11_1' => -9999,
        'data11_0' => -9999,
        'data12' => -9999,
        'data13' => -9999,
        'data14' => -9999,
        'data15' => -9999,
        'data16' => -9999,
        'data17' => -9999,
        'data18' => -9999,
        'data19' => -9999,
        'data20' => -9999,
        'data21' => -9999,
        'data22' => -9999,
        'data23' => -9999,
        'data24' => -9999,
        'data25' => -9999,
        'data26' => -9999,
        'data27' => -9999,
        'data28' => -9999,
        'data29' => -9999,
        'data30' => -9999
    );

    /**
     * 接收设备状态
     * */
    public $accept_status = array(

    );


    /**
     * 修改设备状态
     * */
    public function editStatus(){
        $id = I('post.id','','trim');
        $data['status'] = I('post.status','','trim') == 1 ? 0 : 1;
        $row = $this->where("id = {$id}")->save($data);
        $log="{$_SESSION['admin']['account']}修改了管理员[$id]的状态为{$data['status']}。";
        $data =  $row !==false ? array('msg'=>'修改成功!','code'=>200) : array('msg'=>'修改失败!','code'=>400);
        echo json_encode($data);
        return $log;
    }

}